(function(){var a=[].slice;(function(b,e){var d,c;c="scroll";if(typeof define==="function"&&define.amd){return define(c,["easing"],e)}else{if(typeof exports==="object"){return module.exports=e(require("easing"))}else{d=b[c];b[c]=e(b.easing);return b[c].noConflict=function(){var f;f=b[c];b[c]=d;return f}}}})(window||this,(function(c,j){var i,d,h,b,l,f,k,e;i={HORIZONTAL:0,VERTICAL:1,supported:!!document.querySelector&&!!document.querySelectorAll&&!!document.addEventListener&&!!document.removeEventListener};h={easing:j,pages:null,defaults:{speed:500,easing:"expo",offset:0,url:true,before:null,after:null}};i.addEasing=function(g,m){return h.easing[g]=m};k=function(n,g,m){if(g===i.VERTICAL){return n.scrollTop=m}else{return n.scrollLeft=m}};f=function(m,g){if(g===i.VERTICAL){return m.scrollTop}else{return m.scrollLeft}};d=function(m,g,p,n){var o;o=0;if(p.offsetParent){while(p){o+=g===i.VERTICAL?p.offsetTop:p.offsetLeft;p=p.offsetParent}}o-=n;return Math.max(o,0)};e=function(m,g){if(g||String(g)==="true"){return typeof history.pushState==="function"?history.pushState({pos:m.id},"",window.location.pathname+m):void 0}};b=function(n){var g,m;m={};g=n.getAttribute("data-scroll-ease");if(g){m.easing=g}g=n.getAttribute("data-scroll-speed");if(g){m.speed=Number(g)}g=n.getAttribute("data-scroll-offset");if(g){m.offset=Number(g)}g=n.getAttribute("data-scroll-what");if(g){m.page=String(g)}g=n.getAttribute("data-scroll-direction");m.direction=g==="horizontal"?i.HORIZONTAL:i.VERTICAL;g=n.getAttribute("data-scroll-url");if(g){m.url=String(g)==="true"}return m};i.animate=function(v,w){var m,q,o,g,t,r,n,s,u,p;if(!h.pages){return console.warn("module not initialized")}t=h.pages[w.page]||h.pages.body;r=c.merge(t.settings||{},w||{});r.offset=parseInt(r.offset,10);r.speed=parseInt(r.speed,10);r.easing=String(r.easing);q=document.querySelector(v);if(!q){return console.warn("element not found matching",v)}s=f(t.elem,t.direction);m=d(t.elem,t.direction,q,r.offset)-s;p=0;o=null;j=h.easing[r.easing];if(!j){console.warn("easing function ",r.easing,"not found");j=h.easing.linear}u=function(){clearInterval(o);q.focus();return typeof r.after==="function"?r.after(v):void 0};g=function(){var x;x=Math.min((p+=16)/r.speed,1);k(t.elem,t.direction,Math.floor(s+m*j(x)));if(x===1){return u()}};n=function(){if(typeof r.before==="function"){r.before(v)}return o=setInterval(g,16)};if(f(t.elem,t.direction)===0){k(0)}e(v,r.url);n();return{stop:u}};l=function(g){var m;m=c.closest(g.target,"[data-scroll]");if(m){g.preventDefault();if(h.scrolling){h.scrolling.stop()}return h.scrolling=i.animate(m.getAttribute("data-scroll"),b(m))}};i.destroy=function(){return document.removeEventListener("click",l,false)};i.init=function(o){var s,n,r,g,p,q,m;if(!i.supported){return console.warn("module not supported")}i.destroy();h.pages={body:{elem:document.body,direction:i.VERTICAL,settings:h.defaults}};g=document.querySelectorAll("[data-scroll-page]");for(q=0,m=g.length;q<m;q++){r=g[q];n=r.getAttribute("data-scroll-page");p=c.merge(h.defaults,o||{},b(r));s=r.getAttribute("data-scroll-direction");s=s==="horizontal"?i.HORIZONTAL:i.VERTICAL;h.pages[n]={elem:r,direction:s,settings:p}}return document.addEventListener("click",l,false)};return i}).bind(this,(function(){return{merge:function(){var d,h,f,b,g,e,c;f=1<=arguments.length?a.call(arguments,0):[];b={};for(e=0,c=f.length;e<c;e++){h=f[e];for(d in h){g=h[d];b[d]=g}}return b},closest:function(d,b){var c;c=b.charAt(0);b=b.substr(1);while(d&&d!==document){switch(c){case".":if(d.classList.contains(b)){return d}break;case"#":if(d.id===b){return d}break;case"[":if(d.hasAttribute(b.substr(0,b.length-1))){return d}}d=d.parentNode}return false}}})()))}).call(this);