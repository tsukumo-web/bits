(function(){(function(a,d){var c,b;if(typeof define==="function"&&define.amd){return define("datepicker",["moment"],d)}else{if(typeof exports==="object"){return module.exports=d(require("moment"))}else{b="datepicker";c=a[b];a[b]=d(a.moment);return a[b].noConflict=function(){var e;e=a[b];a[b]=c;return e}}}})(window||this,(function(c,d){var a,b;b={range:{years:12},yy:"yy",mm:"mm",dd:"dd"};return a=(function(){e.moment=d;function e(u,n){var p,o,q,t,r,g,k,h,f,v,x,w,s,m,l,j;r=this;this.now=d();u.style.overflow="hidden";if(!n){n={}}if(!n.size){n.size="short"}if(!n.start){n.start=this.now}this.options=n;g=(n.size==="min"&&d.weekdaysMin||n.size==="short"&&d.weekdaysShort||d.weekdays)();g=g.concat(g.splice(0,d.localeData()._week.dow));this.view=c.create((((s=n.size)==="min"||s==="short")&&d.monthsShort||d.months)("-MMM-"),g);u.appendChild(this.view.dom);this.page=b.yy;o=this.prev.bind(this);p=this.next.bind(this);this.view.yy.controls.prev.dom.parentNode.onclick=o;this.view.yy.controls.next.dom.parentNode.onclick=p;m=this.view.yy.content.children;for(k=0,v=m.length;k<v;k++){q=m[k];q.parentNode.onclick=function(){return r.click.call(r,this)}}this.view.mm.header.dom.parentNode.onclick=this.gotoYear.bind(this);this.view.mm.controls.prev.dom.parentNode.onclick=o;this.view.mm.controls.next.dom.parentNode.onclick=p;l=this.view.mm.content.children;for(h=0,x=l.length;h<x;h++){q=l[h];q.parentNode.onclick=function(){return r.click.call(r,this)}}this.view.dd.header.dom.parentNode.onclick=this.gotoMonth.bind(this);this.view.dd.controls.prev.dom.parentNode.onclick=o;this.view.dd.controls.next.dom.parentNode.onclick=p;j=this.view.dd.content.children;for(t=f=0,w=j.length;f<w;t=++f){q=j[t];if(t<7){continue}q.parentNode.onclick=function(){return r.click.call(r,this)}}this.selected={yy:n.start.year(),mm:n.start.month(),dd:n.start.date()};this.viewing={yy:n.start.year(),mm:n.start.month()};this.gotoDay()}e.prototype.prev=function(){switch(this.page){case b.yy:this.viewing.yy-=b.range.years;return this.renderYear();case b.mm:this.viewing.yy--;return this.renderMonth();case b.dd:this.viewing.mm--;if(this.viewing.mm<0){this.viewing.mm=11;this.viewing.yy--}return this.renderDay()}};e.prototype.next=function(){switch(this.page){case b.yy:this.viewing.yy+=b.range.years;return this.renderYear();case b.mm:this.viewing.yy++;return this.renderMonth();case b.dd:this.viewing.mm++;if(this.viewing.mm>11){this.viewing.mm=0;this.viewing.yy++}return this.renderDay()}};e.prototype.setYear=function(f){this.selected.yy=f;this.viewing.mm=mm;if(typeof this.onchange==="function"){this.onchange(this.getMoment())}return this.render()};e.prototype.setMonth=function(f){this.selected.mm=f;this.viewing.mm=f;if(typeof this.onchange==="function"){this.onchange(this.getMoment())}return this.render()};e.prototype.setDay=function(f){this.selected.dd=f;if(typeof this.onchange==="function"){this.onchange(this.getMoment())}return this.render()};e.prototype.set=function(j,i,f){var g,h;if(!i&&!f){if(typeof j==="string"){g=j.split("-");j=parseInt(g[0],10);i=(parseInt(g[1],10))-1;f=parseInt(g[2],10)}else{h=j;j=h.year();i=h.month();f=h.date()}}this.selected.yy=j;this.viewing.yy=j;this.selected.mm=i;this.viewing.mm=i;this.selected.dd=f;if(typeof this.onchange==="function"){this.onchange(this.getMoment())}return this.render()};e.prototype.get=function(){return this.selected};e.prototype.getMoment=function(){var f,g;g=("0"+(this.selected.mm+1)).substr(-2);f=("0"+this.selected.dd).substr(-2);return d(""+this.selected.yy+"-"+g+"-"+f)};e.prototype.click=function(g){var k,j,i,f,h;switch(this.page){case b.yy:this.viewing.yy=Number(g.className.match(/yy-(\d+)/)[1]);return this.gotoMonth();case b.mm:this.viewing.mm=Number(g.className.match(/mm-(\d+)/)[1]);return this.gotoDay();case b.dd:this.selected.yy=Number(g.className.match(/yy-(\d+)/)[1]);this.selected.mm=Number(g.className.match(/mm-(\d+)/)[1]);this.selected.dd=Number(g.className.match(/dd-(\d+)/)[1]);j=this.selected.mm-this.viewing.mm;if(j===-1||j>1){this.prev()}else{if(j===1||j<-1){this.next()}else{h=g.parentNode.children;for(i=0,f=h.length;i<f;i++){k=h[i];k.classList.remove("selected")}g.classList.add("selected")}}return typeof this.onchange==="function"?this.onchange(this.getMoment()):void 0}};e.prototype.renderYear=function(){var k,j,i,g,h,f;j=this.viewing.yy-b.range.years/2;this.view.yy.header.dom.innerHTML=j+" - "+(j+b.range.years-1);h=this.view.yy.content.children;f=[];for(i=0,g=h.length;i<g;i++){k=h[i];k.parentNode.className="yy yy-"+j;k.innerHTML=j;if(this.now.year()===j){k.parentNode.classList.add("today")}if(this.selected.yy===j){k.parentNode.classList.add("selected")}f.push(j++)}return f};e.prototype.renderMonth=function(){var l,h,k,g,j,f;this.view.mm.header.dom.innerHTML=this.viewing.yy;j=this.view.mm.content.children;f=[];for(h=k=0,g=j.length;k<g;h=++k){l=j[h];l.parentNode.className="yy-"+this.viewing.yy+" mm mm-"+h;if(this.now.year()===this.viewing.yy&&this.now.month()===h){l.parentNode.classList.add("today")}if(this.selected.yy===this.viewing.yy&&this.selected.mm===h){f.push(l.parentNode.classList.add("selected"))}else{f.push(void 0)}}return f};e.prototype.renderDay=function(){var n,j,m,l,h,k,f,g;m=d(""+this.viewing.yy+"-"+(("0"+(this.viewing.mm+1)).substr(-2))+"-01").startOf("week");this.view.dd.header.dom.innerHTML=((((k=this.options.size)==="min"||k==="short")&&d.monthsShort||d.months)("-MMM-",this.viewing.mm))+" "+this.viewing.yy;f=this.view.dd.content.children;g=[];for(j=l=0,h=f.length;l<h;j=++l){n=f[j];if(j<7){continue}n.parentNode.className="yy-"+(m.year())+" mm-"+(m.month())+" dd dd-"+(m.date());n.innerHTML=m.date();if(this.viewing.mm<m.month()){n.parentNode.classList.add("mm-next")}else{if(this.viewing.mm>m.month()){n.parentNode.classList.add("mm-prev")}}if(this.now.year()===m.year()&&this.now.month()===m.month()&&this.now.date()===m.date()){n.parentNode.classList.add("today")}if(this.selected.yy===m.year()&&this.selected.mm===m.month()&&this.selected.dd===m.date()){n.parentNode.classList.add("selected")}g.push(m.add(1,"d"))}return g};e.prototype.render=function(){switch(this.page){case b.yy:return this.renderYear();case b.mm:return this.renderMonth();case b.dd:return this.renderDay()}};e.prototype.gotoYear=function(){this.page=b.yy;this.renderYear();this.view.yy.dom.classList.remove("hide");this.view.yy.dom.classList.remove("below");this.view.mm.dom.classList.add("hide");this.view.mm.dom.classList.remove("below");this.view.mm.dom.classList.add("above");this.view.dd.dom.classList.add("hide");return this.view.dd.dom.classList.add("above")};e.prototype.gotoMonth=function(){this.page=b.mm;this.renderMonth();this.view.yy.dom.classList.add("hide");this.view.yy.dom.classList.add("below");this.view.mm.dom.classList.remove("hide");this.view.mm.dom.classList.remove("below");this.view.mm.dom.classList.remove("above");this.view.dd.dom.classList.add("hide");return this.view.dd.dom.classList.add("above")};e.prototype.gotoDay=function(){this.page=b.dd;this.renderDay();this.view.yy.dom.classList.add("hide");this.view.yy.dom.classList.add("below");this.view.mm.dom.classList.add("hide");this.view.mm.dom.classList.add("below");this.view.mm.dom.classList.remove("above");this.view.dd.dom.classList.remove("hide");return this.view.dd.dom.classList.remove("above")};return e})()}).bind(this,(function(){var f,b,a,d,c,e;a="<div class='controls'> <div class='prev'> <div> <div>&lt;</div> </div> </div> <div class='next'> <div> <div>&gt;</div> </div> </div> </div>".replace(/> </g,"><");d="<header><div></div></header>";b=function(h,g){return"<ul>"+(((function(){var i;i=[];while(g--){i.push("<li class='"+h+"'><div></div></li>")}return i})()).join(""))+"</ul>"};c=function(h,g){return("<section class='page "+h+"s'> "+d+" "+a+" "+(b(h,g))+" </section>").replace(/> </g,"><")};e=document.createElement("div");e.className="datepicker";e.innerHTML=""+(c("yy",12))+(c("mm",12))+(c("dd",49));f=function(m,l){var n,k,h,j,g;m.controls={dom:m.dom.children[1]};m.controls.prev={dom:m.controls.dom.children[0].firstChild};m.controls.next={dom:m.controls.dom.children[1].firstChild};m.header={dom:m.dom.children[0].firstChild};m.content={dom:m.dom.children[2]};m.content.children=(function(){var q,o,p,i;p=m.content.dom.children;i=[];for(q=0,o=p.length;q<o;q++){n=p[q];i.push(n.firstChild)}return i})();if(l){for(h=j=0,g=l.length;j<g;h=++j){k=l[h];m.content.children[h].innerHTML=k}}return void 0};return{create:function(g,k){var o,l,j,n,h,m;j={dom:e.cloneNode(true)};j.yy={dom:j.dom.children[0]};f(j.yy);j.mm={dom:j.dom.children[1]};f(j.mm,g);j.dd={dom:j.dom.children[2]};f(j.dd,k);m=j.dd.content.children;for(l=n=0,h=m.length;n<h;l=++n){o=m[l];if(l>6){break}o.parentNode.className="ww ww-"+l}return j}}})()))}).call(this);